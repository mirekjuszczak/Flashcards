<?xml version="1.0" encoding="utf-8" ?>

<Border
    x:Class="FlashCards.UI.Controls.TwoSidesCardControl"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Name="RootOneCardView"
    Style="{StaticResource CardBackgroundStyle}"
    StrokeShape="RoundRectangle 16"
    StrokeThickness="1">
    <Border.GestureRecognizers>
        <TapGestureRecognizer Tapped="OnCardTapped" />
    </Border.GestureRecognizers>

    <VerticalStackLayout
        HorizontalOptions="Fill"
        VerticalOptions="Fill">

        <Grid
            x:Name="TabGrid"
            ColumnDefinitions="*, Auto"
            Margin="10,0">
            <HorizontalStackLayout Grid.Column="0">

                <Image
                    x:Name="RedCircle"
                    Style="{StaticResource RedCircleStyle}">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnRedCircleTapped" />
                    </Image.GestureRecognizers>
                </Image>

                <Image
                    x:Name="YellowCircle"
                    Style="{StaticResource YellowCircleStyle}">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnYellowCircleTapped" />
                    </Image.GestureRecognizers>
                </Image>

                <Image
                    x:Name="GreenCircle"
                    Style="{StaticResource GreenCircleStyle}">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnGreenCircleTapped" />
                    </Image.GestureRecognizers>
                </Image>

            </HorizontalStackLayout>

            <Image
                x:Name="FavouriteIcon"
                Grid.Column="1"
                Style="{StaticResource FavouriteIconStyle}">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnFavoriteTapped" />
                </Image.GestureRecognizers>
            </Image>
        </Grid>

        <Grid
            x:Name="FrontCard"
            HorizontalOptions="Fill"
            VerticalOptions="Fill">

            <!--  Main phrase display with enhanced visual appeal  -->
            <Border
                Margin="20,40,20,20"
                Padding="24,20"
                VerticalOptions="Center"
                BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundPrimaryLight},
                                                  Dark={StaticResource BackgroundPrimaryDark}}"
                StrokeShape="RoundRectangle 16"
                StrokeThickness="0">
                <VerticalStackLayout Spacing="12">
                    <Label
                        Text="Phrase"
                        TextColor="{AppThemeBinding Light={StaticResource AccentPrimaryLight},
                                                    Dark={StaticResource AccentPrimaryDark}}"
                        Style="{StaticResource Text_SubTitle}" />
                    <Label
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                        Text="{Binding Source={x:Reference RootOneCardView}, Path=Phrase}"
                        LineBreakMode="WordWrap"
                        HorizontalTextAlignment="Center"
                        Style="{StaticResource Text_Body}" />
                </VerticalStackLayout>
            </Border>
        </Grid>

        <Grid
            x:Name="BackCard"
            RowDefinitions="*,Auto"
            Margin="20"
            HorizontalOptions="Fill"
            VerticalOptions="Fill">

            <!--  Main content area  -->
            <VerticalStackLayout
                Grid.Row="0"
                VerticalOptions="Start"
                Spacing="24">

                <!--  Translation Section  -->
                <Border
                    Margin="0,20,0,0"
                    Padding="24,20"
                    BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundPrimaryLight},
                                                      Dark={StaticResource BackgroundPrimaryDark}}"
                    StrokeShape="RoundRectangle 16"
                    StrokeThickness="0">
                    <VerticalStackLayout Spacing="12">
                        <Label
                            Text="Translation"
                            TextColor="{AppThemeBinding Light={StaticResource AccentPrimaryLight},
                                                        Dark={StaticResource AccentPrimaryDark}}"
                            Style="{StaticResource Text_SubTitle}" />
                        <Label
                            Text="{Binding Source={x:Reference RootOneCardView}, Path=Translation}"
                            LineBreakMode="WordWrap"
                            Style="{StaticResource Text_Body}" />
                    </VerticalStackLayout>
                </Border>

                <!--  Example Section  -->
                <Border
                    Padding="24,20"
                    BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceLight},
                                                      Dark={StaticResource SurfaceDark}}"
                    StrokeShape="RoundRectangle 16"
                    StrokeThickness="1"
                    Stroke="{AppThemeBinding Light={StaticResource AccentPrimaryLight},
                                             Dark={StaticResource AccentPrimaryDark}}">
                    <VerticalStackLayout Spacing="12">
                        <Label
                            Text="Example"
                            TextColor="{AppThemeBinding Light={StaticResource AccentPrimaryLight},
                                                        Dark={StaticResource AccentPrimaryDark}}"
                            Style="{StaticResource Text_SubTitle}" />
                        <Label
                            Text="{Binding Source={x:Reference RootOneCardView}, Path=Example}"
                            LineBreakMode="WordWrap"
                            Style="{StaticResource Text_Body_Italic}"
                            Opacity="0.9" />
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!--  Fixed bottom section with Category and Progress  -->
            <VerticalStackLayout
                Grid.Row="1"
                Margin="0,20,0,20"
                Spacing="16">

                <!--  Info Cards Row at bottom  -->
                <Grid
                    ColumnDefinitions="*,*"
                    ColumnSpacing="12">

                    <!--  Category Card  -->
                    <Border
                        Grid.Column="0"
                        Padding="16,14"
                        BackgroundColor="{AppThemeBinding Light={StaticResource AccentPrimaryLight},
                                                          Dark={StaticResource AccentPrimaryDark}}"
                        StrokeShape="RoundRectangle 12"
                        StrokeThickness="0">
                        <VerticalStackLayout Spacing="6">
                            <Label
                                Text="Category"
                                TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight},
                                                            Dark={StaticResource TextPrimaryLight}}"
                                FontSize="11"
                                FontAttributes="Bold"
                                Style="{StaticResource Text_Body}"
                                Opacity="0.85" />
                            <Label
                                Text="{Binding Source={x:Reference RootOneCardView}, Path=CategoryName}"
                                TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight},
                                                            Dark={StaticResource TextPrimaryLight}}"
                                LineBreakMode="TailTruncation"
                                FontSize="15"
                                FontAttributes="Bold"
                                Style="{StaticResource Text_SubTitle}" />
                        </VerticalStackLayout>
                    </Border>

                    <!--  Learning Progress Card  -->
                    <Border
                        Grid.Column="1"
                        Padding="16,14"
                        BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceSecondaryLight},
                                                          Dark={StaticResource SurfaceSecondaryDark}}"
                        StrokeShape="RoundRectangle 12"
                        StrokeThickness="2"
                        Stroke="{AppThemeBinding Light={StaticResource AccentPrimaryLight},
                                                 Dark={StaticResource AccentPrimaryDark}}">
                        <VerticalStackLayout Spacing="6">
                            <Label
                                Text="Progress"
                                FontSize="11"
                                FontAttributes="Bold"
                                Style="{StaticResource Text_Body}"
                                Opacity="0.85" />
                            <Label
                                Text="{Binding Source={x:Reference RootOneCardView}, Path=LearningProgress}"
                                LineBreakMode="TailTruncation"
                                FontSize="15"
                                FontAttributes="Bold"
                                Style="{StaticResource Text_SubTitle}" />
                        </VerticalStackLayout>
                    </Border>
                </Grid>

            </VerticalStackLayout>
        </Grid>
    </VerticalStackLayout>
</Border>
